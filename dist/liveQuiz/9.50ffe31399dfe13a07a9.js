(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Oy4E:function(e,t,a){"use strict";a.r(t),a.d(t,"DashboardRoutingModule",function(){return p});var n=a("tyNb"),r=a("fXoL"),o=a("gvIg"),i=a("AytR"),d=a("tk/3");const s=i.a.base_api_url+"/dashboard/";let l=(()=>{class e{constructor(e){this.httpService=e}getDashboardValue(e){return this.httpService.get(s+e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](d.HttpClient))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=a("LPYB"),c=a("ofXK"),m=a("f4AX"),b=a("Wp6s");const g=["barChart"],C=[{path:"",children:[{path:"admin",component:(()=>{class e{constructor(e,t,a,n,r){this.localUserService=e,this.dashboardService=t,this.themeService=a,this.datePipe=n,this.userService=r,this.size=2,this.adminDashboard={},this.lineChartLabels=[],this.lineChartData=[],this.lineChartData2=[],this.linechartValue=[],this.barChartLabels=[],this.barChartData=[],this.barChartValue=[],this.lineChartType="line",this.lineChartLegend=!0,this.lineChartPlugins=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.lineChartOptions={responsive:!0,legend:{display:!0,labels:{fontColor:"gray"}},scales:{xAxes:[{ticks:{fontColor:"gray"},gridLines:{color:""}}],yAxes:[{ticks:{fontColor:"gray",callback:function(e){return Number.isInteger(e)?e:null}},gridLines:{color:""}}]}},this.barChartOptions={responsive:!0,legend:{display:!0,labels:{fontColor:"gray"}},scales:{xAxes:[{ticks:{fontColor:"gray"},gridLines:{color:""}}],yAxes:[{ticks:{fontColor:"gray"},gridLines:{color:""}}]}},this.schoolId=this.localUserService.getUser().belongs_to_school,this.adminDashboard.closedSchedule=0,this.adminDashboard.liveSchedulesCount=0,this.adminDashboard.studentsCount=0,this.adminDashboard.teachersCount=0,this.adminDashboard.upcomingSchedulesCount=0}ngOnInit(){this.getAndSetData()}getAndSetData(){this.dashboardService.getDashboardValue(this.schoolId).subscribe(e=>{this.adminDashboard=e,console.log(this.adminDashboard),this.adminDashboard.attendancePercentage=e.attendancePercentage.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,10),this.adminDashboard.teacherClosedClassChart=e.teacherClosedClassChart.sort((e,t)=>t.count-e.count).slice(0,10),console.log("class chart",this.adminDashboard.teacherClosedClassChart),console.log("attended chart",this.adminDashboard.attendancePercentage),this.adminDashboard.attendancePercentage.forEach(e=>{this.lineChartData.push(e.participants),this.lineChartData2.push(e.attended)});const t=this.adminDashboard.attendancePercentage.map(e=>e.date);this.lineChartLabels=[],t.forEach(e=>{const t=new Date(e),a=this.datePipe.transform(t,"yyyy-MM-dd");this.lineChartLabels.push(a)}),this.linechartValue[1]={},this.linechartValue[1].data=this.lineChartData2,this.linechartValue[1].label="attended",this.linechartValue[1].backgroundColor="#0F9D58",this.linechartValue[1].borderColor="#0F9D58",this.linechartValue[0].data=this.lineChartData,this.linechartValue[0].label="Participants",this.linechartValue[0].fill=1,this.linechartValue[0].backgroundColor="#F4B400",this.linechartValue[0].borderColor="#F4B400",this.linechartValue[0].pointBackgroundColor="#F4B400",this.userService.getAllUsers(this.localUserService.getUser().belongs_to_school).subscribe(e=>{this.adminDashboard.teacherClosedClassChart.forEach(t=>{this.barChartLabels.push(e.find(e=>e._id==t.host_id).name)})}),this.barChartData=this.adminDashboard.teacherClosedClassChart.map(e=>e.count);var a=this.myCanvas.nativeElement.getContext("2d").createLinearGradient(0,0,0,450);a.addColorStop(0,"rgba(255, 0,0, 0.5)"),a.addColorStop(.5,"rgba(255, 0, 0, 0.25)"),a.addColorStop(1,"rgba(255, 0, 0, 0)"),this.barChartValue[0].data=this.barChartData,this.barChartValue[0].label="Closed Schedules",this.barChartValue[0].backgroundColor=a,this.barChartValue[0].hoverBackgroundColor="#0F9D58"})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l),r["\u0275\u0275directiveInject"](h.c),r["\u0275\u0275directiveInject"](c.DatePipe),r["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-admin-dashboad"]],viewQuery:function(e,t){var a;1&e&&r["\u0275\u0275viewQuery"](g,!0),2&e&&r["\u0275\u0275queryRefresh"](a=r["\u0275\u0275loadQuery"]())&&(t.myCanvas=a.first)},decls:44,vars:15,consts:[[1,"container-fluid","mb-4","dashboard"],["id","root"],[1,"pt-2"],[1,"row","justify-content-between"],[1,"c-dashboardInfo","col-lg-2","col-md-6","col-sm-6","col-xs-6"],[1,"wrap"],[1,"heading","heading5","hind-font","medium-font-weight","c-dashboardInfo__title"],[1,"hind-font","caption-12","c-dashboardInfo__count"],[1,"c-dashboardInfo","col-lg-2","col-md-4","col-sm-6"],[1,"col-lg-6","col-xs-12"],[1,"_overall_mat_card_inner"],["baseChart","",3,"datasets","labels","options","legend","chartType"],[1,"col-lg-6","col-xs-12","mt-md-0","mt-3"],["baseChart","",2,"height","50vh",3,"datasets","labels","options","legend","chartType"],["barChart",""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"div",5),r["\u0275\u0275elementStart"](6,"h4",6),r["\u0275\u0275text"](7," Students "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"span",7),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",8),r["\u0275\u0275elementStart"](11,"div",5),r["\u0275\u0275elementStart"](12,"h4",6),r["\u0275\u0275text"](13,"Teachers "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"span",7),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",8),r["\u0275\u0275elementStart"](17,"div",5),r["\u0275\u0275elementStart"](18,"h4",6),r["\u0275\u0275text"](19,"Live classes "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"span",7),r["\u0275\u0275text"](21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",8),r["\u0275\u0275elementStart"](23,"div",5),r["\u0275\u0275elementStart"](24,"h4",6),r["\u0275\u0275text"](25,"Upcoming classes "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"span",7),r["\u0275\u0275text"](27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",8),r["\u0275\u0275elementStart"](29,"div",5),r["\u0275\u0275elementStart"](30,"h4",6),r["\u0275\u0275text"](31,"Closed Classes "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"span",7),r["\u0275\u0275text"](33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",3),r["\u0275\u0275elementStart"](35,"div",9),r["\u0275\u0275elementStart"](36,"mat-card",10),r["\u0275\u0275elementStart"](37,"div"),r["\u0275\u0275element"](38,"canvas",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"div",12),r["\u0275\u0275elementStart"](40,"mat-card",10),r["\u0275\u0275elementStart"](41,"div"),r["\u0275\u0275element"](42,"canvas",13,14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](t.adminDashboard.studentsCount),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.adminDashboard.teachersCount),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.adminDashboard.liveSchedulesCount),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.adminDashboard.upcomingSchedulesCount),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.adminDashboard.closedSchedule),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("datasets",t.linechartValue)("labels",t.lineChartLabels)("options",t.lineChartOptions)("legend",t.lineChartLegend)("chartType",t.lineChartType),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("datasets",t.barChartValue)("labels",t.barChartLabels)("options",t.barChartOptions)("legend",t.barChartLegend)("chartType",t.barChartType))},directives:[b.a,h.a],styles:['mat-card[_ngcontent-%COMP%]{width:100%;height:100%}.c-dashboardInfo[_ngcontent-%COMP%]{margin-bottom:15px}.c-dashboardInfo[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{background:var(--secondl-card-color);box-shadow:2px 10px 20px rgba(0,0,0,.1);border-radius:7px;text-align:center;position:relative;overflow:hidden;padding:40px 25px 20px;height:100%}.c-dashboardInfo__subInfo[_ngcontent-%COMP%], .c-dashboardInfo__title[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.18em}.c-dashboardInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.c-dashboardInfo__count[_ngcontent-%COMP%]{font-weight:600;font-size:2.5em;line-height:64px;color:var(--text-color)}.c-dashboardInfo[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]:after{display:block;position:absolute;top:0;left:0;width:100%;height:10px;content:""}.c-dashboardInfo[_ngcontent-%COMP%]:first-child   .wrap[_ngcontent-%COMP%]:after{background:linear-gradient(82.59deg,#00c48c,#00a173)}.c-dashboardInfo[_ngcontent-%COMP%]:nth-child(2)   .wrap[_ngcontent-%COMP%]:after{background:linear-gradient(81.67deg,#0084f4,#1a4da2)}.c-dashboardInfo[_ngcontent-%COMP%]:nth-child(3)   .wrap[_ngcontent-%COMP%]:after{background:linear-gradient(69.83deg,#0084f4,#00c48c)}.c-dashboardInfo[_ngcontent-%COMP%]:nth-child(4)   .wrap[_ngcontent-%COMP%]:after{background:linear-gradient(81.67deg,#ff647c,#1f5dc5)}.c-dashboardInfo[_ngcontent-%COMP%]:nth-child(5)   .wrap[_ngcontent-%COMP%]:after{background:linear-gradient(81.67deg,#00c48c,#1f5dc5)}.c-dashboardInfo__title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d7d7d7;margin-left:5px}.MuiSvgIcon-root-19[_ngcontent-%COMP%]{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:24px;transition:fill .2s cubic-bezier(.4,0,.2,1) 0ms;-webkit-user-select:none;user-select:none;flex-shrink:0}@media only screen and (max-width:600px){mat-card[_ngcontent-%COMP%]{width:100%;height:100%;padding:0}.dashboard[_ngcontent-%COMP%]{overflow:scroll;overflow-x:hidden;height:calc(100vh - 70px)!important}}@media only screen and (min-width:600px) and (max-width:1250px){.dashboard[_ngcontent-%COMP%]{overflow:scroll;overflow-x:hidden;height:calc(100vh - 140px)!important}}']}),e})()}]}];let p=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.f.forChild(C)],n.f]}),e})()}}]);