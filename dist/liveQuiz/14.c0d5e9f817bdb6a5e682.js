(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{ejW6:function(e,t,n){"use strict";n.r(t),n.d(t,"StudentModule",function(){return W});var i=n("ofXK"),l=n("3Pt+"),s=n("Vxd/"),a=n("tyNb"),r=n("ecC8"),o=n("l207"),d=n("r2HY"),c=n("fXoL"),m=n("gvIg"),u=n("XZ4W"),p=n("Q4sr"),h=n("dNgK"),g=n("OrhT"),f=n("NFeN"),v=n("ZOsW");function S(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",25),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.pwdConfirmError)}}function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",25),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.emailError)}}const _=function(){return{standalone:!0}};let x=(()=>{class e{constructor(e,t,n,i,l,s){this.formBuilder=e,this.localUserService=t,this.studentservice=n,this.classesService=i,this.matSnackBar=l,this.router=s,this.loading=!0,this.flag=!1,this.p_hide=!0,this.cp_hide=!0,this.role="student",this.schoolId=this.localUserService.getUser().belongs_to_school,this.subscriptionPlan=this.localUserService.getUser().subscriptionPlan,this.studentCreateTitle=o.Ob,this.pwdConfirmError=o.Y,this.emailError=o.D,this.studentNameLabel=o.Sb,this.studentEmailLabel=o.Pb,this.studentPasswordLabel=o.Tb,this.studentCPasswordLabel=o.Mb,this.parentPhoneNumberLabel=o.V,this.studentClassLabel=o.Nb,this.parentEmailLabel=o.U,this.studentSubmitButton=o.Ub}ngOnInit(){this.classesList=this.classesService.getClassesOfoneSchool(this.schoolId),this.initForm()}initForm(){this.studentcreateform=this.formBuilder.group({name:["",l.A.required],email:["",[l.A.required,l.A.email,l.A.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",[l.A.required]],confirm_password:["",[l.A.required]],belongs_to_school:[""],subscriptionPlan:[""],_student:this.formBuilder.group({belongs_to_class_id:[""],parent_email_id:["",[l.A.required,l.A.email,l.A.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],parent_mobile_number:["",[l.A.required,l.A.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})},{validator:Object(d.a)("password","confirm_password")}),this.studentcreateform.get("email").valueChanges.subscribe(e=>{this.studentcreateform.get("email").setValue(e.toLowerCase(),{emitEvent:!1})})}get f(){return this.studentcreateform.controls}get s(){return this.studentcreateform.controls._student.controls}passwordEye(){this.p_hide=!this.p_hide}confirmpasswordEye(){this.cp_hide=!this.cp_hide}onSubmit(){this.flag=!0;const e=this.studentcreateform.value;e.role=this.role,e.belongs_to_school=this.schoolId,e._student.belongs_to_class_id=this.classSelected,e.subscriptionPlan=this.subscriptionPlan,this.studentservice.createStudent(e).subscribe(e=>{e._id?(this.matSnackBar.open("Student  create","success",{duration:2e3}),this.reset(),this.flag=!1,this.router.navigate(["livequiz/settings/page/student/list"])):this.matSnackBar.open("Something wrong","failed",{duration:2e3})})}reset(){this.studentcreateform.reset()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](l.g),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](p.a),c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-student-create"]],decls:47,vars:26,consts:[[1,"main-div","_text_color"],[3,"formGroup"],[2,"text-align","center"],["class","alert alert-danger",4,"ngIf"],[1,"form-group","col-sm-12"],["for","name",1,"control-label","required"],["type","text","id","name","formControlName","name","required","","appCheckFormFieldValidity","",1,"form-control"],[1,"form-group"],[1,"col-sm-12"],["for","email",1,"control-label","required"],["type","email","id","email","formControlName","email","required","","appCheckFormFieldValidity","",1,"form-control"],["for","text",1,"control-label","required"],[1,"input_img",3,"click"],["type","password","id","text","formControlName","password","required","","appCheckFormFieldValidity","",1,"form-control",3,"type"],["for","password",1,"control-label","required"],[1,"input_img_confirm",3,"click"],["type","password","id","password","formControlName","confirm_password","required","","appCheckFormFieldValidity","",1,"form-control",3,"type"],["formGroupName","_student"],["for","number",1,"control-label","required"],["type","number","id","text","formControlName","parent_mobile_number","required","","appCheckFormFieldValidity","",1,"form-control"],["for","number",1,"control-label","required",2,"margin-left","13px","margin-bottom","0px"],["bindLabel","name","bindValue","_id","dropdownPosition","auto","placeholder","click to select the class","appendTo","body",1,"custom",2,"margin","15px",3,"items","virtualScroll","selectableGroup","closeOnSelect","ngModel","ngModelOptions","ngModelChange"],["type","email","id","email","formControlName","parent_email_id","required","","appCheckFormFieldValidity","",1,"form-control"],[1,"bt"],[1,"btn",3,"disabled","click"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"form",1),c["\u0275\u0275elementStart"](2,"h1",2),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,S,2,1,"div",3),c["\u0275\u0275template"](5,b,2,1,"div",3),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"label",5),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](9,"input",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",7),c["\u0275\u0275elementStart"](11,"div",8),c["\u0275\u0275elementStart"](12,"label",9),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](14,"input",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",4),c["\u0275\u0275elementStart"](16,"label",11),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"mat-icon",12),c["\u0275\u0275listener"]("click",function(){return t.passwordEye()}),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](20,"input",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"div",7),c["\u0275\u0275elementStart"](22,"div",8),c["\u0275\u0275elementStart"](23,"label",14),c["\u0275\u0275text"](24),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"mat-icon",15),c["\u0275\u0275listener"]("click",function(){return t.confirmpasswordEye()}),c["\u0275\u0275text"](26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](27,"input",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",17),c["\u0275\u0275elementStart"](29,"div",7),c["\u0275\u0275elementStart"](30,"div",8),c["\u0275\u0275elementStart"](31,"label",18),c["\u0275\u0275text"](32),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](33,"input",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"div",7),c["\u0275\u0275elementStart"](35,"label",20),c["\u0275\u0275text"](36),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"ng-select",21),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.classSelected=e}),c["\u0275\u0275pipe"](38,"async"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"div",7),c["\u0275\u0275elementStart"](40,"div",8),c["\u0275\u0275elementStart"](41,"label",9),c["\u0275\u0275text"](42),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](43,"input",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](44,"div",23),c["\u0275\u0275elementStart"](45,"button",24),c["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),c["\u0275\u0275text"](46),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("formGroup",t.studentcreateform),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.studentCreateTitle),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.f.confirm_password.invalid&&t.f.confirm_password.errors.confirmedValidator),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.f.email.invalid&&t.f.email.errors.pattern||t.s.parent_email_id.invalid&&t.s.parent_email_id.errors.pattern),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](t.studentNameLabel),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.studentEmailLabel),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](t.studentPasswordLabel),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.p_hide?"visibility_off":"visibility"," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("type",t.p_hide?"password":"text"),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](t.studentCPasswordLabel),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.cp_hide?"visibility_off":"visibility"," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("type",t.cp_hide?"password":"text"),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.parentPhoneNumberLabel),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](t.studentClassLabel),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("items",c["\u0275\u0275pipeBind1"](38,23,t.classesList))("virtualScroll",!0)("selectableGroup",!0)("closeOnSelect",!1)("ngModel",t.classSelected)("ngModelOptions",c["\u0275\u0275pureFunction0"](25,_)),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.parentEmailLabel),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("disabled",t.studentcreateform.invalid||t.flag),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](t.studentSubmitButton))},directives:[l.C,l.r,l.k,i.NgIf,l.d,l.q,l.i,l.y,g.a,f.a,l.l,l.v,v.a,l.t],pipes:[i.AsyncPipe],styles:[".main-div[_ngcontent-%COMP%]{display:flex;justify-content:center;overflow:scroll;overflow-x:hidden;height:calc(100vh - 150px)!important}form[_ngcontent-%COMP%]{width:800px}.bt[_ngcontent-%COMP%]{text-align:center}@media only screen and (max-width:600px){.main-div[_ngcontent-%COMP%]{height:auto;margin:0;left:0}.main-div[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%}}@media only screen and (min-width:1200px) and (max-width:1440px){.main-div[_ngcontent-%COMP%]{height:auto;margin:0;left:0}.main-div[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{width:100%}}"]}),e})();var C=n("1kSV"),E=n("njyG"),w=n("XNiG"),y=n("Xa2L"),I=n("zTjc"),M=n("NpuA"),k=n("tk/3");function O(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",8),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275propertyInterpolate"]("value",t.index),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("",e.name," ")}}function P(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"p"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"button",9),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().downloadExcelFile()}),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate2"]("",e.studentselectedClass," ",e.selectedClassname,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.uploadText),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.downloadButton)}}function F(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275namespaceSVG"](),c["\u0275\u0275elementStart"](1,"svg",11),c["\u0275\u0275element"](2,"path",12),c["\u0275\u0275element"](3,"path",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275namespaceHTML"](),c["\u0275\u0275elementStart"](4,"form",14),c["\u0275\u0275listener"]("ngSubmit",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSubmit()}),c["\u0275\u0275elementStart"](5,"input",15,16),c["\u0275\u0275listener"]("change",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onFileSelect(t)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"button",17),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("formGroup",e.uploadForm),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("disabled",!e.uploadForm.valid),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.saveButton)}}let L=(()=>{class e{constructor(e,t,n,i,l,s,a){this.fb=e,this.eachClassService=t,this.studentService=n,this.localUserService=i,this.httpClient=l,this.router=s,this.matSnackBar=a,this.students=[],this.schoolId="",this.selectedClassId=null,this.currentSubscriptionPlan=null,this.selectedClassname=null,this.studentsExcelData=[],this.progress=0,this.close_Student_upload_modal=new c.EventEmitter,this.schoolId=this.localUserService.getUser().belongs_to_school,this.currentSubscriptionPlan=this.localUserService.getUser().subscriptionPlan,this.studentselectedClass=o.Yb,this.uploadText=o.xc,this.downloadButton=o.C,this.saveButton=o.qb}ngOnInit(){this.eachClassService.getClassesOfoneSchool(this.schoolId).subscribe(e=>{this.classes=e}),this.uploadForm=this.fb.group({uploadstudents:[""]})}onChange(e){console.log("selected value",e),this.selectedClassId=this.classes[e]._id,this.selectedClassname=this.classes[e].name}onFileSelect(e){if(e.target.files.length>0){const t=e.target.files[0];this.uploadForm.get("uploadstudents").setValue(t),M.parse(t,{header:!0,skipEmptyLines:!0,complete:(e,t)=>{console.log("upload data ",e.data),this.studentsExcelData=e.data,this.studentsExcelData.forEach(e=>{const t={};t.belongs_to_school=this.schoolId,t.name=e.name,t.email=e.email,t.password=e.password,t._student={},t._student.belongs_to_class_id=this.selectedClassId,t._student.parent_email_id=e.parent_email_id,t._student.parent_mobile_number=e.parent_phone_number,t.role="student",t.subscriptionPlan=this.students.push(t)})}})}}downloadExcelFile(){let e=document.createElement("a");e.download=this.selectedClassname+"_students_upload",e.href=o.Xb,e.click(),this.templateDownloaded=!0}onSubmit(){console.log("Student on submit",this.students),this.studentService.saveManyStudents(this.students).subscribe(e=>{this.matSnackBar.open("Student upload","success",{duration:1e3}),this.close_Student_upload_modal.emit(!0),this.router.navigate(["livequiz/settings/page/student/list"])})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](l.g),c["\u0275\u0275directiveInject"](p.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](k.HttpClient),c["\u0275\u0275directiveInject"](a.c),c["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-upload-student"]],outputs:{close_Student_upload_modal:"close_Student_upload_modal"},decls:10,vars:3,consts:[[1,"col","d-flex","justify-content-center","align-items-center"],[1,"downloadExcelFile"],[1,"mr-2"],["name","selectClass","id","",3,"change"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","row","style","text-align: center;",4,"ngIf"],[3,"value"],[1,"btn",3,"click"],[1,"row",2,"text-align","center"],["width","2em","height","2em","viewBox","0 0 19 19","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-upload"],["fill-rule","evenodd","d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"],["fill-rule","evenodd","d","M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"pt-2",3,"formGroup","ngSubmit"],["type","file","id","fileDropRef","name","uploadstudents",3,"change"],["fileDropRef",""],["color","primary","type","submit",1,"btn",3,"disabled"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"label",2),c["\u0275\u0275text"](3,"Class :"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"select",3),c["\u0275\u0275listener"]("change",function(e){return t.onChange(e.target.value)}),c["\u0275\u0275elementStart"](5,"option",4),c["\u0275\u0275text"](6,"Choose class"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,O,2,2,"option",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](8,P,7,4,"div",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,F,9,3,"div",7),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngForOf",t.classes),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null!=t.selectedClassname),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null!=t.selectedClassname))},directives:[l.u,l.B,i.NgForOf,i.NgIf,l.C,l.r,l.k],styles:[""]}),e})();var j=n("9svf"),q=n("7dP1");function V(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",13),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().editUser()}),c["\u0275\u0275text"](1,"Edit"),c["\u0275\u0275elementEnd"]()}}function D(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",13),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().updateUser()}),c["\u0275\u0275text"](1,"Update"),c["\u0275\u0275elementEnd"]()}}const N=function(){return{standalone:!0}};let B=(()=>{class e{constructor(e,t,n,i,l,s){this.studentService=e,this.confirmationDialogService=t,this.modalService=n,this.authService=i,this.matSnackBar=l,this.router=s,this.studentDetails=[],this.showCase=!1}ngOnInit(){console.log(this.id),this.getSingleStudentDetails(this.id)}getSingleStudentDetails(e){this.studentService.getSingleStudent(e).subscribe(e=>{console.log(e),this.studentDetails=e,this.studentMobile=this.studentDetails._student.parent_mobile_number,this.parentEmail=this.studentDetails._student.parent_email_id,console.log(this.studentMobile)})}editUser(){this.showCase=!0}deleteUser(){this.confirmationDialogService.confirm("Please confirm..",`Do you really want to delete ${this.studentDetails.name} ?`).then(e=>{e&&(console.log("clicked okay",e),this.authService.deleteSingleUser(this.studentDetails._id).subscribe(e=>{console.log(e),this.matSnackBar.open(e.message,"success",{duration:2e3,verticalPosition:"top",horizontalPosition:"right"})}),this.modalService.dismissAll(),this.router.navigate(["livequiz/settings/page"]))}).catch(()=>console.log("User dismissed the dialog (e.g., by using ESC, clicking the cross icon, or clicking outside the dialog)"))}updateUser(){this.studentDetails._student.parent_mobile_number=this.studentMobile,this.studentDetails._student.parent_email_id=this.parentEmail,this.authService.updateUser(this.studentDetails._id,this.studentDetails).subscribe(e=>{console.log(e),this.matSnackBar.open(e.message,"success",{duration:2e3,verticalPosition:"top",horizontalPosition:"right"}),this.modalService.dismissAll()},e=>{this.matSnackBar.open(e.error.message,"undo",{duration:2e3,verticalPosition:"top",horizontalPosition:"right"}),this.modalService.dismissAll()})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](j.a),c["\u0275\u0275directiveInject"](C.d),c["\u0275\u0275directiveInject"](q.a),c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](a.c))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-student-details"]],inputs:{id:"id"},decls:27,vars:18,consts:[[1,"main-div"],[1,"form-group"],[1,"col-sm-12"],["for","student_email",1,"control-label","required"],["type","email","id","student_email",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["for","student_name",1,"control-label","required"],["type","text","id","student_name",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["for","student_mobile_number",1,"control-label","required"],["type","number","id","student_mobile_number",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["for","parent_email",1,"control-label","required"],["type","email","id","parent_email",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"row","justify-content-center","mx-3"],["class","mx-3 btn",3,"click",4,"ngIf"],[1,"mx-3","btn",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"form"),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275elementStart"](4,"label",3),c["\u0275\u0275text"](5,"Email"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"input",4),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.studentDetails.email=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div",1),c["\u0275\u0275elementStart"](8,"div",2),c["\u0275\u0275elementStart"](9,"label",5),c["\u0275\u0275text"](10,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"input",6),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.studentDetails.name=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",1),c["\u0275\u0275elementStart"](13,"div",2),c["\u0275\u0275elementStart"](14,"label",7),c["\u0275\u0275text"](15,"Parent Mobile"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"input",8),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.studentMobile=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",1),c["\u0275\u0275elementStart"](18,"div",2),c["\u0275\u0275elementStart"](19,"label",9),c["\u0275\u0275text"](20,"Parent Email"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"input",10),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.parentEmail=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",11),c["\u0275\u0275template"](23,V,2,0,"button",12),c["\u0275\u0275template"](24,D,2,0,"button",12),c["\u0275\u0275elementStart"](25,"button",13),c["\u0275\u0275listener"]("click",function(){return t.deleteUser()}),c["\u0275\u0275text"](26,"Delete"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngModel",t.studentDetails.email)("ngModelOptions",c["\u0275\u0275pureFunction0"](14,N))("disabled",!t.showCase),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.studentDetails.name)("ngModelOptions",c["\u0275\u0275pureFunction0"](15,N))("disabled",!t.showCase),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.studentMobile)("ngModelOptions",c["\u0275\u0275pureFunction0"](16,N))("disabled",!t.showCase),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",t.parentEmail)("ngModelOptions",c["\u0275\u0275pureFunction0"](17,N))("disabled",!t.showCase),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.showCase),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showCase))},directives:[l.C,l.r,l.s,l.d,l.q,l.t,l.v,i.NgIf],styles:[""]}),e})();const U=["singleStudentModal"];function A(e,t){1&e&&c["\u0275\u0275element"](0,"mat-spinner",15)}function T(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"app-im-alert",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.studentError)}}function z(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td",17),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"]().onListItemClick(n)}),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"titlecase"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("",c["\u0275\u0275pipeBind1"](3,1,e.name)," ")}}function R(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",18),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275elementStart"](2,"h2",20),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"i",21),c["\u0275\u0275listener"]("click",function(){return t.$implicit.dismiss("Cross click")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",22),c["\u0275\u0275elementStart"](6,"app-upload-student",23),c["\u0275\u0275listener"]("close_Student_upload_modal",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().closestudentuploadmodal(t)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.studentuploadTitle)}}function G(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",18),c["\u0275\u0275elementStart"](1,"div",24),c["\u0275\u0275elementStart"](2,"h2",25),c["\u0275\u0275text"](3,"Student Details"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"i",26),c["\u0275\u0275listener"]("click",function(){return t.$implicit.dismiss("Cross click")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",22),c["\u0275\u0275elementStart"](6,"app-student-details",27),c["\u0275\u0275listener"]("modalClose",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().modalClose(t)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("id",e.selectedid)}}const $=function(){return{standalone:!0}},Q=[{path:"",canActivate:[r.a],children:[{path:"",redirectTo:"list"},{path:"list",component:(()=>{class e{constructor(e,t,n,i,l){this.router=e,this.studentservice=t,this.localUserService=n,this.eachClassService=i,this.modalService=l,this.closeResult="",this.loading=!0,this.quizlists=[],this.dtOptions={},this.dtTrigger=new w.a,this.schoolId=this.localUserService.getUser().belongs_to_school,this.eachClassService.getClassesOfoneSchool(this.schoolId).subscribe(e=>{this.allClassList=e}),this.studentFilterPlaceholder=o.Rb,this.studentAddButton=o.Lb,this.studentUploadButton=o.Wb,this.studentError=o.Qb,this.studentTableHead=o.Vb,this.studentuploadTitle=o.Zb}ngOnInit(){this.getStudents(),this.dtOptions={pagingType:"full",pageLength:10,dom:"Pfrtip",searching:!0,language:{search:"",searchPlaceholder:"Search...",info:"showing _END_ out of _TOTAL_ Students Found",infoEmpty:"0 Students Found"},oLanguage:{oPaginate:{sFirst:"First",sPrevious:"<i class='fa fa-arrow-left' aria-hidden='true'></i>",sNext:"<i class='fa fa-arrow-right' aria-hidden='true'></i>",sLast:"Last"}}}}onListItemClick(e){this.selectedid=this.students[e]._id,console.log(this.selectedid),this.open(this.singleStudentModal)}getStudents(){this.studentservice.getStudents(this.schoolId).subscribe(e=>{this.students=e,this.studentslength=e.length,this.filteredStudents=this.students,this.loading=!1,this.dtTrigger.next()})}changeClass(e){this.filteredStudents=null==e?this.students:this.students.filter(t=>t._student.belongs_to_class_id===e),this.studentslength=this.filteredStudents.length}openAddNewStudent(){this.router.navigate(["livequiz/settings/page/student/create"])}open(e){this.modalService.open(e,{ariaLabelledBy:"New Class",windowClass:"student-upload",centered:!0}).result.then(e=>{this.closeResult="Closed with: "+e},e=>{this.closeResult="Dismissed "+this.getDismissReason(e)})}closestudentuploadmodal(e){this.close_Student_upload_modal=e,console.log(e),1==this.close_Student_upload_modal&&(console.log("changeDetected..."),this.modalService.dismissAll())}modalClose(e){console.warn("modal close")}getDismissReason(e){return e===C.a.ESC?"by pressing ESC":e===C.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: "+e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](a.c),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](p.a),c["\u0275\u0275directiveInject"](C.d))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-student-list"]],viewQuery:function(e,t){var n;1&e&&(c["\u0275\u0275viewQuery"](E.a,!0),c["\u0275\u0275viewQuery"](U,!0)),2&e&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.dtElement=n.first),c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.singleStudentModal=n.first))},inputs:{quizlists:"quizlists"},decls:24,vars:13,consts:[[1,"_text_color","students"],[1,"row","d-flex","justify-content-end"],[1,"col-md-4","m-2"],["bindLabel","name","bindValue","_id","appendTo","body",3,"items","placeholder","selectableGroup","closeOnSelect","ngModel","ngModelOptions","itemsChange","change","ngModelChange"],[1,"float",3,"click"],[1,"fa","fa-plus","my-float"],[1,"float-upload",3,"click"],[1,"fa","fa-upload","my-float"],["class","loading",4,"ngIf"],["type","danger",4,"ngIf"],["datatable","",1,"table",3,"dtOptions","dtTrigger"],[1,"text-center","text-white","m-0"],[4,"ngFor","ngForOf"],["content",""],["singleStudentModal",""],[1,"loading"],["type","danger"],[2,"color","black","cursor","pointer",3,"click"],[1,"modal_control"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title","w-100","text-center"],["aria-hidden","true",1,"fa","fa-times",3,"click"],[1,"modal-body"],[3,"close_Student_upload_modal"],[1,"modal-header","_text_color"],["id","modal-basic-title",1,"modal-title","_text_color"],["aria-hidden","true",1,"fa","fa-times","_text_color",3,"click"],[3,"id","modalClose"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"ng-select",3),c["\u0275\u0275listener"]("itemsChange",function(e){return t.allClassList=e})("change",function(){return t.changeClass(t.classSelected)})("ngModelChange",function(e){return t.classSelected=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div"),c["\u0275\u0275elementStart"](5,"a",4),c["\u0275\u0275listener"]("click",function(){return t.openAddNewStudent()}),c["\u0275\u0275element"](6,"i",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"div"),c["\u0275\u0275elementStart"](8,"a",6),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](21);return t.open(n)}),c["\u0275\u0275element"](9,"i",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,A,1,0,"mat-spinner",8),c["\u0275\u0275template"](11,T,2,1,"app-im-alert",9),c["\u0275\u0275elementStart"](12,"table",10),c["\u0275\u0275elementStart"](13,"thead"),c["\u0275\u0275elementStart"](14,"tr"),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275elementStart"](16,"h2",11),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"tbody"),c["\u0275\u0275template"](19,z,4,3,"tr",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](20,R,7,1,"ng-template",null,13,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275template"](22,G,7,1,"ng-template",null,14,c["\u0275\u0275templateRefExtractor"])}2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275propertyInterpolate"]("placeholder",t.studentFilterPlaceholder),c["\u0275\u0275property"]("items",t.allClassList)("selectableGroup",!0)("closeOnSelect",!0)("ngModel",t.classSelected)("ngModelOptions",c["\u0275\u0275pureFunction0"](12,$)),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==t.studentslength),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.studentTableHead),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.filteredStudents))},directives:[v.a,l.q,l.t,i.NgIf,E.a,i.NgForOf,y.b,I.a,L,B],pipes:[i.TitleCasePipe],styles:[".students[_ngcontent-%COMP%]{margin-top:5px}  .student-upload .modal-content{border:3px solid #3a8af6!important;border-radius:25px!important}@media only screen and (max-width:600px){  .student-upload .modal-dialog{width:100%;margin:0!important;border:none!important}  .modal-open .modal{overflow:hidden!important}.modal_control[_ngcontent-%COMP%]{height:100vh}  .modal-backdrop.show{opacity:0!important}  .student-upload .modal-content{border:0!important;border-radius:0!important}.students[_ngcontent-%COMP%]{overflow:scroll;overflow-x:hidden;height:calc(100vh - 100px)!important}}"]}),e})(),canActivate:[r.a]},{path:"create",component:x,canActivate:[r.a]}]}];let H=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(Q)],a.f]}),e})();var X=n("zib+"),K=n("pKmL");let W=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[u.a],imports:[[i.CommonModule,l.m,l.x,C.e,s.a,H,v.b,X.a,K.a,E.b]]}),e})()}}]);